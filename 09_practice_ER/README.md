## 課題１
- 階層が増えれば増えるほどjoinの回数が増える
- 階層の深さを調べるクエリを書かないといけない
- 集合の全てを取得してアプリ側でデータの形成などを行わないといけないので、関心ごとが増える

## 課題２
別紙参照

## 課題３
- ドキュメント管理アプリで、ディレクトリに階層がある場合のアプリケーション
  - ディレクトリ階層を作成する際に隣接リストのデータ構造に陥る可能性がある

## クロージャテーブル以外のソリューション
### 入れ子集合
- 集合に対して幅を持たせて、データを管理する
- このの記事を参考にするとよい [入れ子集合](https://gihyo.jp/dev/serial/01/sql_academy2/000501)
- デメリット
  - 幅を覚えておかないと
  - 両端を決めて入力しないといけないから、設計に柔軟さが欠ける
  - 両端の値に溢れそうなデータ量になってきたら、改修するのが大変
 
### 経路列挙のデータ
- 階層に関するパスをデータとして持たせる。
- メリット
  - 隣接リストよりも、データの持ち方がシンプル
- デメリット
  - pathが文字列が格納されるので、誤ったデータが入る可能性がある
  - whereで検索時にLIKEを用いないといけない。検索に引っかからない可能性もある
  - 当該のデータを取得しても、pathが文字列なのでデータの形成をした上でデータを取得しないといけいない

### クロージャ(一様記載)
- messageに階層がある場合、messageテーブルと、message管理テーブルを作成し、messageテーブルに親子関係を示すカラムを持たせる(親messageId, 子messageId)

- メリット
  - シンプルな設計であること、外部キーの恩恵を受けれるのでデータ整合性も担保できる

- デメリット
  - 親に関連した子供を取得する際に、子供の子供を取得することも考慮しないといけない(データ取得時の関連性の考慮)
  - 親に関連したデータ取得プラスcountで子の深さを取得。深さ分の子供も子供を取得(クエリの考慮)
